"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[1521],{34994:function(be,ce,e){e.d(ce,{A:function(){return o}});var d=e(1413),i=e(8232),g=e(67294),B=e(78733),re=e(9105),M=e(4942),w=e(97685),oe=e(87462),de=e(50756),ve=e(46976),k=function(m,W){return g.createElement(ve.Z,(0,oe.Z)({},m,{ref:W,icon:de.Z}))},X=g.forwardRef(k),J=e(21770),me=e(86333),fe=e(28459),I=e(78957),q=e(93967),D=e.n(q),S=e(66758),R=e(2514),se=e(98082),_=function(m){return(0,M.Z)({},m.componentCls,{"&-title":{marginBlockEnd:m.marginXL,fontWeight:"bold"},"&-container":(0,M.Z)({flexWrap:"wrap",maxWidth:"100%"},"> div".concat(m.antCls,"-space-item"),{maxWidth:"100%"}),"&-twoLine":(0,M.Z)((0,M.Z)((0,M.Z)((0,M.Z)({display:"block",width:"100%"},"".concat(m.componentCls,"-title"),{width:"100%",margin:"8px 0"}),"".concat(m.componentCls,"-container"),{paddingInlineStart:16}),"".concat(m.antCls,"-space-item,").concat(m.antCls,"-form-item"),{width:"100%"}),"".concat(m.antCls,"-form-item"),{"&-control":{display:"flex",alignItems:"center",justifyContent:"flex-end","&-input":{alignItems:"center",justifyContent:"flex-end","&-content":{flex:"none"}}}})})};function pe(v){return(0,se.Xj)("ProFormGroup",function(m){var W=(0,d.Z)((0,d.Z)({},m),{},{componentCls:".".concat(v)});return[_(W)]})}var n=e(85893),T=g.forwardRef(function(v,m){var W=g.useContext(S.Z),O=W.groupProps,y=(0,d.Z)((0,d.Z)({},O),v),Re=y.children,je=y.collapsible,ge=y.defaultCollapsed,Ae=y.style,xe=y.labelLayout,Me=y.title,ee=Me===void 0?v.label:Me,l=y.tooltip,u=y.align,t=u===void 0?"start":u,x=y.direction,C=y.size,b=C===void 0?32:C,A=y.titleStyle,Y=y.titleRender,G=y.spaceProps,s=y.extra,f=y.autoFocus,z=(0,J.Z)(function(){return ge||!1},{value:v.collapsed,onChange:v.onCollapse}),V=(0,w.Z)(z,2),Z=V[0],$=V[1],Ze=(0,g.useContext)(fe.ZP.ConfigContext),E=Ze.getPrefixCls,Ie=(0,R.zx)(v),$e=Ie.ColWrapper,U=Ie.RowWrapper,K=E("pro-form-group"),ie=pe(K),H=ie.wrapSSR,L=ie.hashId,De=je&&(0,n.jsx)(X,{style:{marginInlineEnd:8},rotate:Z?void 0:90}),ye=(0,n.jsx)(me.G,{label:De?(0,n.jsxs)("div",{children:[De,ee]}):ee,tooltip:l}),F=(0,g.useCallback)(function(j){var te=j.children;return(0,n.jsx)(I.Z,(0,d.Z)((0,d.Z)({},G),{},{className:D()("".concat(K,"-container ").concat(L),G==null?void 0:G.className),size:b,align:t,direction:x,style:(0,d.Z)({rowGap:0},G==null?void 0:G.style),children:te}))},[t,K,x,L,b,G]),Ce=Y?Y(ye,v):ye,Ee=(0,g.useMemo)(function(){var j=[],te=g.Children.toArray(Re).map(function(N,p){var Q;return g.isValidElement(N)&&N!==null&&N!==void 0&&(Q=N.props)!==null&&Q!==void 0&&Q.hidden?(j.push(N),null):p===0&&g.isValidElement(N)&&f?g.cloneElement(N,(0,d.Z)((0,d.Z)({},N.props),{},{autoFocus:f})):N});return[(0,n.jsx)(U,{Wrapper:F,children:te},"children"),j.length>0?(0,n.jsx)("div",{style:{display:"none"},children:j}):null]},[Re,U,F,f]),Se=(0,w.Z)(Ee,2),ne=Se[0],le=Se[1];return H((0,n.jsx)($e,{children:(0,n.jsxs)("div",{className:D()(K,L,(0,M.Z)({},"".concat(K,"-twoLine"),xe==="twoLine")),style:Ae,ref:m,children:[le,(ee||l||s)&&(0,n.jsx)("div",{className:"".concat(K,"-title ").concat(L).trim(),style:A,onClick:function(){$(!Z)},children:s?(0,n.jsxs)("div",{style:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between"},children:[Ce,(0,n.jsx)("span",{onClick:function(te){return te.stopPropagation()},children:s})]}):Ce}),(0,n.jsx)("div",{style:{display:je&&Z?"none":void 0},children:ne})]})}))});T.displayName="ProForm-Group";var ae=T,he=e(4499);function o(v){return(0,n.jsx)(B.I,(0,d.Z)({layout:"vertical",contentRender:function(W,O){return(0,n.jsxs)(n.Fragment,{children:[W,O]})}},v))}o.Group=ae,o.useForm=i.Z.useForm,o.Item=he.Z,o.useWatch=i.Z.useWatch,o.ErrorList=i.Z.ErrorList,o.Provider=i.Z.Provider,o.useFormInstance=i.Z.useFormInstance,o.EditOrReadOnlyContext=re.A},38020:function(be,ce,e){e.d(ce,{U9:function(){return xe},L0:function(){return ee},bg:function(){return ge}});var d=e(4942),i=e(1413),g=e(74165),B=e(15861),re=e(74902),M=e(97685),w=e(91),oe=e(10915),de=e(92210),ve=e(1977),k=e(48171),X=e(71230),J=e(15746),me=e(28459),fe=e(67159),I=e(3363),q=e(14726),D=e(78957),S=e(8232),R=e(93967),se=e.n(R),_=e(50344),pe=e(21770),n=e(67294),T=e(97435),ae=e(80334),he=e(78733),o=e(85893),v=["onFinish","step","formRef","title","stepProps"];function m(l){var u=(0,n.useRef)(),t=(0,n.useContext)(ge),x=(0,n.useContext)(xe),C=(0,i.Z)((0,i.Z)({},l),x),b=C.onFinish,A=C.step,Y=C.formRef,G=C.title,s=C.stepProps,f=(0,w.Z)(C,v);return(0,ae.ET)(!f.submitter,"StepForm \u4E0D\u5305\u542B\u63D0\u4EA4\u6309\u94AE\uFF0C\u8BF7\u5728 StepsForm \u4E0A"),(0,n.useImperativeHandle)(Y,function(){return u.current},[Y==null?void 0:Y.current]),(0,n.useEffect)(function(){if(C.name||C.step){var z=(C.name||C.step).toString();return t==null||t.regForm(z,C),function(){t==null||t.unRegForm(z)}}},[]),t&&t!==null&&t!==void 0&&t.formArrayRef&&(t.formArrayRef.current[A||0]=u),(0,o.jsx)(he.I,(0,i.Z)({formRef:u,onFinish:function(){var z=(0,B.Z)((0,g.Z)().mark(function V(Z){var $;return(0,g.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(f.name&&(t==null||t.onFormFinish(f.name,Z)),!b){E.next=9;break}return t==null||t.setLoading(!0),E.next=5,b==null?void 0:b(Z);case 5:return $=E.sent,$&&(t==null||t.next()),t==null||t.setLoading(!1),E.abrupt("return");case 9:t!=null&&t.lastStep||t==null||t.next();case 10:case"end":return E.stop()}},V)}));return function(V){return z.apply(this,arguments)}}(),onInit:function(V,Z){var $;u.current=Z,t&&t!==null&&t!==void 0&&t.formArrayRef&&(t.formArrayRef.current[A||0]=u),f==null||($=f.onInit)===null||$===void 0||$.call(f,V,Z)},layout:"vertical"},(0,T.Z)(f,["layoutType","columns"])))}var W=m,O=e(98082),y=function(u){return(0,d.Z)({},u.componentCls,{"&-container":{width:"max-content",minWidth:"420px",maxWidth:"100%",margin:"auto"},"&-steps-container":(0,d.Z)({maxWidth:"1160px",margin:"auto"},"".concat(u.antCls,"-steps-vertical"),{height:"100%"}),"&-step":{display:"none",marginBlockStart:"32px","&-active":{display:"block"},"> form":{maxWidth:"100%"}}})};function Re(l){return(0,O.Xj)("StepsForm",function(u){var t=(0,i.Z)((0,i.Z)({},u),{},{componentCls:".".concat(l)});return[y(t)]})}var je=["current","onCurrentChange","submitter","stepsFormRender","stepsRender","stepFormRender","stepsProps","onFinish","formProps","containerStyle","formRef","formMapRef","layoutRender"],ge=n.createContext(void 0),Ae={horizontal:function(u){var t=u.stepsDom,x=u.formDom;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(X.Z,{gutter:{xs:8,sm:16,md:24},children:(0,o.jsx)(J.Z,{span:24,children:t})}),(0,o.jsx)(X.Z,{gutter:{xs:8,sm:16,md:24},children:(0,o.jsx)(J.Z,{span:24,children:x})})]})},vertical:function(u){var t=u.stepsDom,x=u.formDom;return(0,o.jsxs)(X.Z,{align:"stretch",wrap:!0,gutter:{xs:8,sm:16,md:24},children:[(0,o.jsx)(J.Z,{xxl:4,xl:6,lg:7,md:8,sm:10,xs:12,children:n.cloneElement(t,{style:{height:"100%"}})}),(0,o.jsx)(J.Z,{children:(0,o.jsx)("div",{style:{display:"flex",alignItems:"center",width:"100%",height:"100%"},children:x})})]})}},xe=n.createContext(null);function Me(l){var u=(0,n.useContext)(me.ZP.ConfigContext),t=u.getPrefixCls,x=t("pro-steps-form"),C=Re(x),b=C.wrapSSR,A=C.hashId,Y=l.current,G=l.onCurrentChange,s=l.submitter,f=l.stepsFormRender,z=l.stepsRender,V=l.stepFormRender,Z=l.stepsProps,$=l.onFinish,Ze=l.formProps,E=l.containerStyle,Ie=l.formRef,$e=l.formMapRef,U=l.layoutRender,K=(0,w.Z)(l,je),ie=(0,n.useRef)(new Map),H=(0,n.useRef)(new Map),L=(0,n.useRef)([]),De=(0,n.useState)([]),ye=(0,M.Z)(De,2),F=ye[0],Ce=ye[1],Ee=(0,n.useState)(!1),Se=(0,M.Z)(Ee,2),ne=Se[0],le=Se[1],j=(0,oe.YB)(),te=(0,pe.Z)(0,{value:l.current,onChange:l.onCurrentChange}),N=(0,M.Z)(te,2),p=N[0],Q=N[1],Ne=(0,n.useMemo)(function(){return Ae[(Z==null?void 0:Z.direction)||"horizontal"]},[Z==null?void 0:Z.direction]),Te=(0,n.useMemo)(function(){return p===F.length-1},[F.length,p]),Ye=(0,n.useCallback)(function(r,a){H.current.has(r)||Ce(function(h){return[].concat((0,re.Z)(h),[r])}),H.current.set(r,a)},[]),Ue=(0,n.useCallback)(function(r){Ce(function(a){return a.filter(function(h){return h!==r})}),H.current.delete(r),ie.current.delete(r)},[]);(0,n.useImperativeHandle)($e,function(){return L.current},[L.current]),(0,n.useImperativeHandle)(Ie,function(){var r;return(r=L.current[p||0])===null||r===void 0?void 0:r.current},[p,L.current]);var Ke=(0,n.useCallback)(function(){var r=(0,B.Z)((0,g.Z)().mark(function a(h,c){var Pe,We;return(0,g.Z)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(ie.current.set(h,c),!(!Te||!$)){P.next=3;break}return P.abrupt("return");case 3:return le(!0),Pe=de.T.apply(void 0,[{}].concat((0,re.Z)(Array.from(ie.current.values())))),P.prev=5,P.next=8,$(Pe);case 8:We=P.sent,We&&(Q(0),L.current.forEach(function(ke){var Ve;return(Ve=ke.current)===null||Ve===void 0?void 0:Ve.resetFields()})),P.next=15;break;case 12:P.prev=12,P.t0=P.catch(5),console.log(P.t0);case 15:return P.prev=15,le(!1),P.finish(15);case 18:case"end":return P.stop()}},a,null,[[5,12,15,18]])}));return function(a,h){return r.apply(this,arguments)}}(),[Te,$,le,Q]),Oe=(0,n.useMemo)(function(){var r=(0,ve.n)(fe.Z,"4.24.0")>-1,a=r?{items:F.map(function(h){var c=H.current.get(h);return(0,i.Z)({key:h,title:c==null?void 0:c.title},c==null?void 0:c.stepProps)})}:{};return(0,o.jsx)("div",{className:"".concat(x,"-steps-container ").concat(A).trim(),style:{maxWidth:Math.min(F.length*320,1160)},children:(0,o.jsx)(I.Z,(0,i.Z)((0,i.Z)((0,i.Z)({},Z),a),{},{current:p,onChange:void 0,children:!r&&F.map(function(h){var c=H.current.get(h);return(0,o.jsx)(I.Z.Step,(0,i.Z)({title:c==null?void 0:c.title},c==null?void 0:c.stepProps),h)})}))})},[F,A,x,p,Z]),ue=(0,k.J)(function(){var r,a=L.current[p];(r=a.current)===null||r===void 0||r.submit()}),Le=(0,k.J)(function(){p<1||Q(p-1)}),ze=(0,n.useMemo)(function(){return s!==!1&&(0,o.jsx)(q.ZP,(0,i.Z)((0,i.Z)({type:"primary",loading:ne},s==null?void 0:s.submitButtonProps),{},{onClick:function(){var a;s==null||(a=s.onSubmit)===null||a===void 0||a.call(s),ue()},children:j.getMessage("stepsForm.next","\u4E0B\u4E00\u6B65")}),"next")},[j,ne,ue,s]),Be=(0,n.useMemo)(function(){return s!==!1&&(0,o.jsx)(q.ZP,(0,i.Z)((0,i.Z)({},s==null?void 0:s.resetButtonProps),{},{onClick:function(){var a;Le(),s==null||(a=s.onReset)===null||a===void 0||a.call(s)},children:j.getMessage("stepsForm.prev","\u4E0A\u4E00\u6B65")}),"pre")},[j,Le,s]),Ge=(0,n.useMemo)(function(){return s!==!1&&(0,o.jsx)(q.ZP,(0,i.Z)((0,i.Z)({type:"primary",loading:ne},s==null?void 0:s.submitButtonProps),{},{onClick:function(){var a;s==null||(a=s.onSubmit)===null||a===void 0||a.call(s),ue()},children:j.getMessage("stepsForm.submit","\u63D0\u4EA4")}),"submit")},[j,ne,ue,s]),Qe=(0,k.J)(function(){p>F.length-2||Q(p+1)}),Fe=(0,n.useMemo)(function(){var r=[],a=p||0;if(a<1?F.length===1?r.push(Ge):r.push(ze):a+1===F.length?r.push(Be,Ge):r.push(Be,ze),r=r.filter(n.isValidElement),s&&s.render){var h,c={form:(h=L.current[p])===null||h===void 0?void 0:h.current,onSubmit:ue,step:p,onPre:Le};return s.render(c,r)}return s&&(s==null?void 0:s.render)===!1?null:r},[F.length,ze,ue,Be,Le,p,Ge,s]),He=(0,n.useMemo)(function(){return(0,_.Z)(l.children).map(function(r,a){var h=r.props,c=h.name||"".concat(a),Pe=p===a,We=Pe?{contentRender:V,submitter:!1}:{};return(0,o.jsx)("div",{className:se()("".concat(x,"-step"),A,(0,d.Z)({},"".concat(x,"-step-active"),Pe)),children:(0,o.jsx)(xe.Provider,{value:(0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({},We),Ze),h),{},{name:c,step:a}),children:r})},c)})},[Ze,A,x,l.children,p,V]),Xe=(0,n.useMemo)(function(){return z?z(F.map(function(r){var a;return{key:r,title:(a=H.current.get(r))===null||a===void 0?void 0:a.title}}),Oe):Oe},[F,Oe,z]),Je=(0,n.useMemo)(function(){return(0,o.jsxs)("div",{className:"".concat(x,"-container ").concat(A).trim(),style:E,children:[He,f?null:(0,o.jsx)(D.Z,{children:Fe})]})},[E,He,A,x,f,Fe]),we=(0,n.useMemo)(function(){var r={stepsDom:Xe,formDom:Je};return f?f(U?U(r):Ne(r),Fe):U?U(r):Ne(r)},[Xe,Je,Ne,f,Fe,U]);return b((0,o.jsx)("div",{className:se()(x,A),children:(0,o.jsx)(S.Z.Provider,(0,i.Z)((0,i.Z)({},K),{},{children:(0,o.jsx)(ge.Provider,{value:{loading:ne,setLoading:le,regForm:Ye,keyArray:F,next:Qe,formArrayRef:L,formMapRef:H,lastStep:Te,unRegForm:Ue,onFormFinish:Ke},children:we})}))}))}function ee(l){return(0,o.jsx)(oe._Y,{needDeps:!0,children:(0,o.jsx)(Me,(0,i.Z)({},l))})}ee.StepForm=W,ee.useForm=S.Z.useForm},86333:function(be,ce,e){e.d(ce,{G:function(){return q}});var d=e(1413),i=e(4942),g=e(87462),B=e(67294),re=e(93696),M=e(62914),w=function(S,R){return B.createElement(M.Z,(0,g.Z)({},S,{ref:R,icon:re.Z}))},oe=B.forwardRef(w),de=e(28459),ve=e(83062),k=e(93967),X=e.n(k),J=e(98082),me=function(S){return(0,i.Z)({},S.componentCls,{display:"inline-flex",alignItems:"center",maxWidth:"100%","&-icon":{display:"block",marginInlineStart:"4px",cursor:"pointer","&:hover":{color:S.colorPrimary}},"&-title":{display:"inline-flex",flex:"1"},"&-subtitle ":{marginInlineStart:8,color:S.colorTextSecondary,fontWeight:"normal",fontSize:S.fontSize,whiteSpace:"nowrap"},"&-title-ellipsis":{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",wordBreak:"keep-all"}})};function fe(D){return(0,J.Xj)("LabelIconTip",function(S){var R=(0,d.Z)((0,d.Z)({},S),{},{componentCls:".".concat(D)});return[me(R)]})}var I=e(85893),q=B.memo(function(D){var S=D.label,R=D.tooltip,se=D.ellipsis,_=D.subTitle,pe=(0,B.useContext)(de.ZP.ConfigContext),n=pe.getPrefixCls,T=n("pro-core-label-tip"),ae=fe(T),he=ae.wrapSSR,o=ae.hashId;if(!R&&!_)return(0,I.jsx)(I.Fragment,{children:S});var v=typeof R=="string"||B.isValidElement(R)?{title:R}:R,m=(v==null?void 0:v.icon)||(0,I.jsx)(oe,{});return he((0,I.jsxs)("div",{className:X()(T,o),onMouseDown:function(O){return O.stopPropagation()},onMouseLeave:function(O){return O.stopPropagation()},onMouseMove:function(O){return O.stopPropagation()},children:[(0,I.jsx)("div",{className:X()("".concat(T,"-title"),o,(0,i.Z)({},"".concat(T,"-title-ellipsis"),se)),children:S}),_&&(0,I.jsx)("div",{className:"".concat(T,"-subtitle ").concat(o).trim(),children:_}),R&&(0,I.jsx)(ve.Z,(0,d.Z)((0,d.Z)({},v),{},{children:(0,I.jsx)("span",{className:"".concat(T,"-icon ").concat(o).trim(),children:m})}))]}))})}}]);
